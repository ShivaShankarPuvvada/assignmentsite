<!DOCTYPE html>
{% extends "base.html" %}
{% load static %}
{% load rest_framework %}


{% block main_content %}
<div class="container">
    <div class="jumbotron">
        <h3>movie Details</h3>
        <ul>
            <li>Movie Name: {{ movie.title }}</li>
            <li>Movie Name: {{ movie.url }}</li>
            <li>Movie Name: {{ movie.released_date }}</li>
            <li>Folder Name: {{ movie.folder.name }}</li>
            <li>Movie Name: {{ movie.wishlist.name }}</li>
            <li>Created at: {{ movie.created_at }}</li>
            <li>Updated at: {{ movie.updated_at }}</li>
        </ul>
        <hr>
        <h3>Update movie:</h3>
        <form id="myform" action="{% url 'port:update_delete_movie' movie_id=movie.id %}" onsubmit="myFunction()" method="PUT" >
            {% csrf_token %}
            {% render_form serializer %}
            <input type="submit" value="Update" class="btn btn-primary">
        </form>
    </div>
</div>
<script>
function myFunction() {
    $.ajax({
        url: "{% url 'port:update_delete_movie' movie_id=movie.id %}",
        type: 'PUT',
        data: $('#myform').serializeArray(),
        success: function() { alert('PUT completed'); }
    });
}
</script>
{% endblock %}